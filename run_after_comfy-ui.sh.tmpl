#!/bin/bash
{{ if .os.macos -}}
COMFYUI_DIR=$HOME/Applications/comfyui

. "$HOME/.asdf/asdf.sh"

conda install -y pytorch torchvision torchaudio -c pytorch-nightly

if [ ! -d $COMFYUI_DIR ]; then
    echo "ðŸ’¡ Cloning comfyui..." 
    git clone https://github.com/comfyanonymous/ComfyUI.git $COMFYUI_DIR
fi

pushd $COMFYUI_DIR
echo "ðŸ’¡ Installing comfyui dependencies (if needed)..."
git pull
pip install -r requirements.txt
popd
{{ end -}}

echo "ðŸ’¡ System initialisation done. Please open a new terminal now..."
